<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[{ Do Something }]]></title>
  <subtitle><![CDATA[躲在某座城，想念某个人]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://www.guoyukun.cn/"/>
  <updated>2014-04-26T16:55:30.000Z</updated>
  <id>http://www.guoyukun.cn/</id>
  
  <author>
    <name><![CDATA[guoyukun]]></name>
    <email><![CDATA[gyk001@gmail.com]]></email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[[译]xbmcswift2命令行]]></title>
    <link href="http://www.guoyukun.cn/post/xbmcswift-commandline/"/>
    <id>http://www.guoyukun.cn/post/xbmcswift-commandline/</id>
    <published>2014-04-26T16:55:30.000Z</published>
    <updated>2014-04-26T16:55:30.000Z</updated>
    <content type="html"><![CDATA[<p>本文翻译自<a href="http://www.xbmcswift.com/en/latest/commandline.html#commandline" target="_blank" rel="external">官方文档：在命令行运行xbmcswift2</a>,可参考<a href="/post/xbmcswift-installation">上一篇文章</a>准备环境</p>
<p>本文主要内容是在命令行环境调试基于<code>xbmcswift2</code>的XBMC插件，重点是不需要XBMC哦</p>
<a id="more"></a>
<h2 id="简介">简介</h2><p>从命令行运行xbmcswift2时有<code>create</code>和<code>run</code>两个命令可用，使用<code>create</code>命令可以生成XBMC扩展的基本结构和必要文件,<br>并且会通过几个简单问题完成个性化。<code>run</code>命令允许你在命令行环境调试扩展。</p>
<p>执行<code>xbmcwift2 -h</code>查看帮助。全部命令下面都会详细的解释</p>
<h2 id="create"><code>create</code></h2><p>创建一个新的扩展，切换到一个你希望放置扩展的目录，执行<code>xbmcswift2 create</code>。<br>然后回答几个问题，现在你应该有一个基本的扩展结构了</p>
<h2 id="run"><code>run</code></h2><p>在命令行执行扩展时，有三种不同的模式：<code>once</code>、<code>interactive</code>和<code>crawl</code>。</p>
<p>也有另外一个可选参数<code>url</code>,默认情况下，xbmcswift2会执行根路径(路径<code>/</code>),比如<code>plugin://plugin.video.academicearth/</code>。<br>这和XBMC的用户第一次进入扩展时的路径一样。你可以从xbmcswift2的输出中找到路径</p>
<p>参数<code>-q</code> 和<code>-v</code>增加或者减少日志级别</p>
<p>注意：</p>
<p>为了在命令行里运行，xbmcswift2尝试模拟了部分XBMC的python绑定，像字符串查找这些功能正常。<br>但是如果一个函数没有实现，xbmcswift2会安静的调用pass避免抛出异常，使插件可以在有限的支持里运行。<br>这是为什么你在命令行运行时经常看到警告日志</p>
<p>如果你计划使用命令行开发扩展，你应该始终从xbmcswift2导入xbmc模块</p>
<pre><code><span class="keyword">from</span> xbcmswift2 <span class="keyword">import</span> xbmcgui
</code></pre><p>xbcmswift2会根据环境导入正确的模块。当运行在XBMC里时会导入实际的模块，<br> 当在命令行运行是他会导入一个没有错误的模拟模块</p>
<h3 id="once">once</h3><p>运行一次扩展然后退出，当可选参数url有值的测试场景很有用</p>
<pre><code>$ xbmcswift2 run once # you can omit the once argument as it is the default

<span class="code">------------------------------------------------------------
 #  Label    Path
------------------------------------------------------------</span>
[0] Subjects (plugin://plugin.video.academicearth/subjects/)
<span class="code">------------------------------------------------------------


$ xbmcswift2 run once plugin://plugin.video.academicearth/subjects/
----------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="header"> #   Label                    Path
----------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="code"> [ 0] ACT                      (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Fact/)</span>
<span class="code"> [ 1] Accounting               (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Faccounting/)</span>
<span class="code"> [ 2] Algebra                  (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Falgebra/)</span>
<span class="code"> [ 3] Anthropology             (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Fanthropology/)</span>
<span class="code"> [ 4] Applied CompSci          (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Fapplied-computer-science/)</span>
<span class="code"> ...</span>
</code></pre><h3 id="interactive">interactive</h3><p>允许用户使用交互是会话单步调试他们的扩展。这意味着模仿一个基本的XBMC的用户界面，点击一个列表界面，<br>会进入一个新的列表，每次列表显示完成后会提示用户选择一个选项，除了初始目录，其他都会有<code>..</code>选项用于回到上一层目录</p>
<pre><code><span class="header">$ xbmcswift2 run interactive
------------------------------------------------------------</span>
<span class="header"> #  Label    Path
------------------------------------------------------------</span>
[0] Subjects (plugin://plugin.video.academicearth/subjects/)
<span class="code">------------------------------------------------------------
Choose an item or "q" to quit: 0

----------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="header"> #   Label                    Path
----------------------------------------------------------------------------------------------------------------------------------------------------------</span>
[ 0] ..                       (plugin://plugin.video.academicearth/)
[ 1] ACT                      (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Fact/)
[ 2] Accounting               (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Faccounting/)
[ 3] Algebra                  (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Falgebra/)
[ 4] Anthropology             (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Fanthropology/)
<span class="code">----------------------------------------------------------------------------------------------------------------------------------------------------------
Choose an item or "q" to quit: 1

-----------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="header"> #  Label                   Path
-----------------------------------------------------------------------------------------------------------------------------------------------</span>
[0] ..                      (plugin://plugin.video.academicearth/subjects/)
[1] ACT - Science Test Prep (plugin://plugin.video.academicearth/courses/http%3A%2F%2Fwww.academicearth.org%2Fcourses%2Fact-science-test-prep/)
-----------------------------------------------------------------------------------------------------------------------------------------------
</code></pre><h3 id="crawl">crawl</h3><p>用来抓取扩展里的每一个有效的路径，每个请求之间会提示用户按回车键继续</p>
<pre><code><span class="header">$ xbmcswift2 run crawl 2&gt;/dev/null
------------------------------------------------------------</span>
<span class="header"> #  Label    Path
------------------------------------------------------------</span>
[0] Subjects (plugin://plugin.video.academicearth/subjects/)
<span class="code">------------------------------------------------------------
Enter to continue or "q" to quit
----------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="header"> #   Label                    Path
----------------------------------------------------------------------------------------------------------------------------------------------------------</span>
[ 0] ACT                      (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Fact/)
[ 1] Accounting               (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Faccounting/)
[ 2] Algebra                  (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Falgebra/)
[ 3] Anthropology             (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Fanthropology/)
[ 4] Applied CompSci          (plugin://plugin.video.academicearth/subjects/http%3A%2F%2Fwww.academicearth.org%2Fsubjects%2Fapplied-computer-science/)
<span class="code">----------------------------------------------------------------------------------------------------------------------------------------------------------
Enter to continue or "q" to quit
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="header"> #   Label                                                                                                  Path
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
[ 0] A Cultural and Scientific Survey of the Eye and Vision                                                 (plugin://plugin.video.academicearth/courses/http%3A%2F%2Fwww.academicearth.org%2Fcourses%2Fa-cultural-and-scientific-survey-of-the-eye-and-vision/)
[ 1] Autism and Related Disorders                                                                           (plugin://plugin.video.academicearth/courses/http%3A%2F%2Fwww.academicearth.org%2Fcourses%2Fautism-and-related-disorders/)
[ 2] Biology                                                                                                (plugin://plugin.video.academicearth/courses/http%3A%2F%2Fwww.academicearth.org%2Fcourses%2Fbiology/)
[ 3] Core Science - Biochemistry I                                                                          (plugin://plugin.video.academicearth/courses/http%3A%2F%2Fwww.academicearth.org%2Fcourses%2Fcore-science---biochemistry-i/)
[ 4] Darwin's Legacy                                                                                        (plugin://plugin.video.academicearth/courses/http%3A%2F%2Fwww.academicearth.org%2Fcourses%2Fdarwins-legacy/)
<span class="code">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Enter to continue or "q" to quit</span>
</code></pre>]]></content>
    <summary type="html">
    <![CDATA[<p>本文翻译自<a href="http://www.xbmcswift.com/en/latest/commandline.html#commandline">官方文档：在命令行运行xbmcswift2</a>,可参考<a href="/post/xbmcswift-installation">上一篇文章</a>准备环境</p>
<p>本文主要内容是在命令行环境调试基于<code>xbmcswift2</code>的XBMC插件，重点是不需要XBMC哦</p>]]>
    
    </summary>
    
      <category term="python" scheme="http://www.guoyukun.cn/tags/python/"/>
    
      <category term="xbmc" scheme="http://www.guoyukun.cn/tags/xbmc/"/>
    
      <category term="翻译" scheme="http://www.guoyukun.cn/tags/translate/"/>
    
      <category term="生命在于折腾" scheme="http://www.guoyukun.cn/categories/zuo/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[[译] 安装 XBMC Swift2]]></title>
    <link href="http://www.guoyukun.cn/post/xbmcswift-installation/"/>
    <id>http://www.guoyukun.cn/post/xbmcswift-installation/</id>
    <published>2014-04-26T14:37:23.000Z</published>
    <updated>2014-04-26T14:37:23.000Z</updated>
    <content type="html"><![CDATA[<p>这篇文章翻译自<a href="http://www.xbmcswift.com/en/latest/installation.html" target="_blank" rel="external">官网安装教程</a>，安装插件开发环境<br>不过官网年久失修，有个小错误，直接照搬还是不行滴，文中有说明</p>
<a id="more"></a>
<p><code>xbmcswift2</code>的目的是使命令行拥有像XBMC一样好的运行扩展插件的能力，这意味着我们需要安装两次<code>xbmcswift2</code>，一次安装到命令行，一次安装到XMBC扩展。XBMC上的<code>xbmcswift2</code>是一个特殊的版本包，不包括命令行代码和测试，但包括像<code>addon.xml</code>这些XBMC必须的文件，获取<code>xbmcswift2</code>最新版本的最简单的方法是安装一个依赖<code>xbmcswift2</code>的扩展。</p>
<p>你可以在<a href="http://www.xbmcswift.com/en/latest/poweredby.html#poweredby" target="_blank" rel="external">这里</a>找到这些扩展的列表，<br>另一个选择是从<a href="https://github.com/jbeluch/xbmcswift2-xbmc-dist/tags" target="_blank" rel="external">xbmcswift代码库</a>下载并解压到你的扩展目录里。</p>
<p>现在安装命令行版本的<code>xbmcswift2</code></p>
<h2 id="安装virtualenv">安装<code>virtualenv</code></h2><p>(一堆关于<code>virtualenv</code>的介绍,忽略)</p>
<p>如果你已经安装了<code>pip</code>，你可以简单执行下面的命令</p>
<pre><code>$ sudo pip <span class="keyword">install</span> virtualenv
</code></pre><p>或者你安装有<code>easy_install</code></p>
<pre><code><span class="variable">$ </span>sudo easy_install virtualenv
</code></pre><p>我也喜欢用一些非常有用的<code>virtualenv</code>脚本，所以最好安装<code>virtualenv-wrapper</code><br><strong>（这里官网写错了，没有中间的连字符）</strong></p>
<pre><code>$ sudo pip <span class="keyword">install</span> virtualenvwrapper
</code></pre><h2 id="创建虚拟环境">创建虚拟环境</h2><p>现在我们可以创建<code>virtualenv</code>了</p>
<pre><code><span class="variable">$ </span>mkvirtualenv xbmcswift2
</code></pre><p>命令完成后，你的提示符前缀应该变成<code>(xbmcswift2)</code>了，<br>新提示符标识现在你在虚拟环境里工作，<br>我们通过pip安装的任何库都只会在这个环境内生效，<br>现在我们安装<code>xbmcswift2</code></p>
<pre><code>$ pip <span class="keyword">install</span> xbmcswift2
</code></pre><p>事情发展不错，以后你打算在你的项目上工作时必须执行下面的命令启动虚拟环境</p>
<pre><code><span class="variable">$ </span>workon xbmcswift2
</code></pre><p>并且在工作结束后取消激活<code>virtualenv</code></p>
<pre><code><span class="variable">$ </span>deactivate
</code></pre><p>环境准备结束，跳转到下一篇：<a href="/post/xbmcswift-commandline">在命令行运行xbmcswift2</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>这篇文章翻译自<a href="http://www.xbmcswift.com/en/latest/installation.html">官网安装教程</a>，安装插件开发环境<br>不过官网年久失修，有个小错误，直接照搬还是不行滴，文中有说明</p>]]>
    
    </summary>
    
      <category term="python" scheme="http://www.guoyukun.cn/tags/python/"/>
    
      <category term="xbmc" scheme="http://www.guoyukun.cn/tags/xbmc/"/>
    
      <category term="翻译" scheme="http://www.guoyukun.cn/tags/translate/"/>
    
      <category term="生命在于折腾" scheme="http://www.guoyukun.cn/categories/zuo/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[XBMC插件开发构想]]></title>
    <link href="http://www.guoyukun.cn/post/xbmc-plugin-start/"/>
    <id>http://www.guoyukun.cn/post/xbmc-plugin-start/</id>
    <published>2014-04-26T14:37:23.000Z</published>
    <updated>2014-04-26T14:37:23.000Z</updated>
    <content type="html"><![CDATA[<p>把树莓派配置成XBMC媒体中心有一段时间了，话说XBMC真是不错，简单安装几个插件就通吃常见视频网站了<br>关键是可以用手机当遥控器，完全没有广告，相当给力,不过用了几天也发现点问题，现有的插件都不是很完美，<br>所以萌生了写XBMC插件的想法，正好借此机会学习一下python。</p>
<a id="more"></a>
<p>目前发现的问题主要有：<br>比如视频插件看连续剧不能连播，得一集一集控制播放，<br>没有我期望的最近播放列表，每次得都重新找一遍<br>歌词插件效果也不太好，窗口展示并且换歌就会隐藏</p>
<p>另一方面我也想知道这些插件怎么跳过广告拿到视频的真实地址，<br>因为在小派上做了一个迅雷的远程下载，但是找不到视频源地址没法下载，利用率太低</p>
<p>查阅了一些资料：基本上XBMC的开发都是用Python，使用内置的<a href="http://www.xbmcswift.com" target="_blank" rel="external">xbmcswift2</a>框架开发，<br>我的XBMC版本是12.3 Frodo，内置xbmcswift2版本是0.3</p>
<p><a href="http://www.xbmcswift.com" target="_blank" rel="external">xbmcswift2</a>是一个快速开发框架，实现了常用的像路由、列表、缓存等常见功能封装，<br>而且有一个命令行的Mock实现，所以可以脱离XBMC进行命令行开发调试，实在是非常方便</p>
<p>后面计划先学习一下文档，然后做一个支持电视剧连播的视频插件、在线视频收藏功能、播放记录和断点续播以及一个比较顺眼的的歌词插件</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>把树莓派配置成XBMC媒体中心有一段时间了，话说XBMC真是不错，简单安装几个插件就通吃常见视频网站了<br>关键是可以用手机当遥控器，完全没有广告，相当给力,不过用了几天也发现点问题，现有的插件都不是很完美，<br>所以萌生了写XBMC插件的想法，正好借此机会学习一下python。</p>]]>
    
    </summary>
    
      <category term="python" scheme="http://www.guoyukun.cn/tags/python/"/>
    
      <category term="xbmc" scheme="http://www.guoyukun.cn/tags/xbmc/"/>
    
      <category term="插件开发" scheme="http://www.guoyukun.cn/tags/plugin-devleop/"/>
    
      <category term="生命在于折腾" scheme="http://www.guoyukun.cn/categories/zuo/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[DB2 IMPORT耗时记录]]></title>
    <link href="http://www.guoyukun.cn/post/db2-import-esapsed-time/"/>
    <id>http://www.guoyukun.cn/post/db2-import-esapsed-time/</id>
    <published>2014-04-24T10:37:01.000Z</published>
    <updated>2014-04-24T10:37:01.000Z</updated>
    <content type="html"><![CDATA[<p>最近操作DB2需要import几张比较大的表，没有专业的DBA，</p>
<p>想估算导入时间也没有经验，所以记下这次的时间供以后参考</p>
<p>导入格式为IXF，COMMITCOUNT设置为自动</p>
<p>完整导入语句如下:</p>
<pre><code>db2 connect to <span class="tag">&lt;<span class="title">DBName</span>&gt;</span>
db2 "IMPORT FROM <span class="tag">&lt;<span class="title">tabXXX</span>&gt;</span>.ixf OF IXF COMMITCOUNT automatic MESSAGES <span class="tag">&lt;<span class="title">tabXXX</span>&gt;</span>.msg REPLACE_CREATE INTO <span class="tag">&lt;<span class="title">TableName</span>&gt;</span>"
</code></pre><a id="more"></a>
<p>这种方式导入CPU占用不足10%，内存60%左右，<br>第三张表竟然导了24个小时以上！实在还有很大的优化余地</p>
<p>不过作为一个二把刀，用的也不多，暂时先不研究了</p>
<h2 id="操作环境">操作环境</h2><ul>
<li><strong>系统</strong>: CentOS Linux 6.4 x64</li>
<li><strong>数据库版本</strong>: V9.5</li>
<li><strong>CPU</strong>: Xeon E7- 4807  @ 1.87GHz 6颗4核</li>
<li><strong>内存</strong>: 16G</li>
</ul>
<h2 id="操作结果">操作结果</h2><!--16:52开始,19:32还没结束-->
<div class="realtab"></div>


<table>
<thead>
<tr>
<th style="text-align:right">行数</th>
<th style="text-align:right">列数</th>
<th style="text-align:right">大小</th>
<th style="text-align:right">耗时</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2543万</td>
<td style="text-align:right">8</td>
<td style="text-align:right">5.74 G</td>
<td style="text-align:right">50 min</td>
</tr>
<tr>
<td style="text-align:right">495万</td>
<td style="text-align:right">13</td>
<td style="text-align:right">1.4 G</td>
<td style="text-align:right">19 min</td>
</tr>
<tr>
<td style="text-align:right">907万</td>
<td style="text-align:right">66</td>
<td style="text-align:right">10.66 G</td>
<td style="text-align:right">&gt;24  hr</td>
</tr>
</tbody>
</table>
]]></content>
    <summary type="html">
    <![CDATA[<p>最近操作DB2需要import几张比较大的表，没有专业的DBA，</p>
<p>想估算导入时间也没有经验，所以记下这次的时间供以后参考</p>
<p>导入格式为IXF，COMMITCOUNT设置为自动</p>
<p>完整导入语句如下:</p>
<pre><code>db2 connect to <span class="tag">&lt;<span class="title">DBName</span>&gt;</span>
db2 "IMPORT FROM <span class="tag">&lt;<span class="title">tabXXX</span>&gt;</span>.ixf OF IXF COMMITCOUNT automatic MESSAGES <span class="tag">&lt;<span class="title">tabXXX</span>&gt;</span>.msg REPLACE_CREATE INTO <span class="tag">&lt;<span class="title">TableName</span>&gt;</span>"
</code></pre>]]>
    
    </summary>
    
      <category term="DB2" scheme="http://www.guoyukun.cn/tags/db2/"/>
    
      <category term="数据迁移" scheme="http://www.guoyukun.cn/tags/data-migration/"/>
    
      <category term="运维管理" scheme="http://www.guoyukun.cn/categories/operation/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[树莓派矫正日期时间]]></title>
    <link href="http://www.guoyukun.cn/post/raspberry-ntpdate/"/>
    <id>http://www.guoyukun.cn/post/raspberry-ntpdate/</id>
    <published>2014-04-21T15:47:35.000Z</published>
    <updated>2014-04-21T15:47:35.000Z</updated>
    <content type="html"><![CDATA[<p>树莓派没有硬件时钟，每次重启时间都会重置。改吧没什么必要，不改看着又实在难受，<br>尤其是把小派改造成xbmc媒体中心以后，界面上的时钟不对总是有一种穿越的感觉。</p>
<p>索性配置成每次启动时自动进行NTP校时，步骤如下：</p>
<a id="more"></a>
<ol>
<li><p>安装ntp，输入</p>
<pre><code>sudo apt-<span class="keyword">get</span> install ntpdate
</code></pre></li>
</ol>
<ol>
<li><p>输入如下命令修改时区，按提示选择就好</p>
<pre><code>tzselect
</code></pre></li>
<li><p>测试网络校时，输入</p>
<pre><code>sudo ntpdate cn<span class="class">.pool</span><span class="class">.ntp</span><span class="class">.org</span>
</code></pre></li>
<li><p>输入<code>date</code>，保证时间校对正常</p>
</li>
<li><p>配置开机自动校时<br> 添加<code>sudo ntpdate cn.pool.ntp.org</code>到<code>/etc/rc.local</code>文件<br> 图中前面几句不用管，那是我挂的迅雷离线下载脚本</p>
 <img src="http://gyk001.u.qiniudn.com/images/pi/ntp-auto.jpg">
</li>
</ol>
<p>参考文章：<a href="http://blog.csdn.net/rk2900/article/details/8660730" target="_blank" rel="external">http://blog.csdn.net/rk2900/article/details/8660730</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>树莓派没有硬件时钟，每次重启时间都会重置。改吧没什么必要，不改看着又实在难受，<br>尤其是把小派改造成xbmc媒体中心以后，界面上的时钟不对总是有一种穿越的感觉。</p>
<p>索性配置成每次启动时自动进行NTP校时，步骤如下：</p>]]>
    
    </summary>
    
      <category term="树莓派" scheme="http://www.guoyukun.cn/tags/raspberrypi/"/>
    
      <category term="生命在于折腾" scheme="http://www.guoyukun.cn/categories/zuo/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[hawtio日志插件]]></title>
    <link href="http://www.guoyukun.cn/post/hawtio-logs/"/>
    <id>http://www.guoyukun.cn/post/hawtio-logs/</id>
    <published>2014-03-04T03:56:32.000Z</published>
    <updated>2014-03-04T03:56:32.000Z</updated>
    <content type="html"><![CDATA[<p>hawtio是一个开箱即用Java程序监控组件，有很多非常吸引人的特性：<br>比如轻量级、非侵入式、插件丰富、扩展性强、基于HTML5的实时Web监控等等。<br>大部分情况下会运行于OSGI容器或者ESB环境中，当然设计上并不依赖OSGI容器，<br>也可以通过独立Java应用或者Web容器运行。</p>
<p><a href="http://hawt.io/plugins/logs/index.html" target="_blank" rel="external">Logs插件</a>加载不出来，去爬<a href="https://github.com/hawtio/hawtio/blob/master/hawtio-web/src/main/webapp/app/log/doc/help.md" target="_blank" rel="external">源代码里help</a>才解决了：<br><img src="http://gyk001.u.qiniudn.com/images/hawtio/logs.jpg"></p>
<p>帮助里是这么描述的：<br><a id="more"></a></p>
<blockquote>
<p>If you have no Logs tab in hawtio, then</p>
<ul>
<li>if you are in OSGi it means you are not running either the <a href="https://github.com/fusesource/fuse/tree/master/insight/insight-log" target="_blank" rel="external">insight-log bundle</a><ul>
<li>if you are outside of OSGi it means you have not added the <a href="https://github.com/fusesource/fuse/tree/master/insight/insight-log4j" target="_blank" rel="external">insight-log4j jar</a> to your hawtio web app or you have not properly initialised the insight-log4j jar to then initialise the LogQuery mbean</li>
</ul>
</li>
</ul>
</blockquote>
<p>我的应用是一个独立Java程序，而且没有使用OSGI，所以应该参考第二中情况：<br>首先在pom中添加依赖<code>insight-log4j</code>，并且要把我之前用的日志是slf4j+logback，先排除掉logback</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.fusesource.insight<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>insight-log4j<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">version</span>&gt;</span>7.1.0.fuse-047<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后重启程序，刷新界面，空欢喜！</p>
<p>继续爬，忘记了一个关键的地方，忘记注册MBean了：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"logQuery"</span> <span class="attribute">class</span>=<span class="value">"org.fusesource.insight.log.log4j.Log4jLogQuery"</span></span><br><span class="line">    <span class="attribute">lazy-init</span>=<span class="value">"false"</span> <span class="attribute">scope</span>=<span class="value">"singleton"</span></span><br><span class="line">    <span class="attribute">init-method</span>=<span class="value">"start"</span> <span class="attribute">destroy-method</span>=<span class="value">"stop"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>当然我的程序不能通过这种方式来加载，那就换成代码咯：</p>
<pre><code class="java">Log4jLogQuery log4jLogQuery = <span class="keyword">new</span> Log4jLogQuery();
log4jLogQuery.start();
</code></pre>
<p>重启程序，刷新界面，漂亮的日志标签页，OK，收工！</p>
<p>话说hawtio的文档尤其是插件部分写的不够详细，<br>很多都只描述了在FuseESB或者Web容器里如何启动，<br>对独立Java程序启动的方式基本忽略了（也许只有我自己这么用？）。</p>
<p>PS：我对log4j感觉不太好，<br>改天写个Logback的桥接，再换回我可爱的Logback！</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>hawtio是一个开箱即用Java程序监控组件，有很多非常吸引人的特性：<br>比如轻量级、非侵入式、插件丰富、扩展性强、基于HTML5的实时Web监控等等。<br>大部分情况下会运行于OSGI容器或者ESB环境中，当然设计上并不依赖OSGI容器，<br>也可以通过独立Java应用或者Web容器运行。</p>
<p><a href="http://hawt.io/plugins/logs/index.html">Logs插件</a>加载不出来，去爬<a href="https://github.com/hawtio/hawtio/blob/master/hawtio-web/src/main/webapp/app/log/doc/help.md">源代码里help</a>才解决了：<br><img src="http://gyk001.u.qiniudn.com/images/hawtio/logs.jpg"></p>
<p>帮助里是这么描述的：<br>]]>
    
    </summary>
    
      <category term="hawtio" scheme="http://www.guoyukun.cn/tags/hawtio/"/>
    
      <category term="log" scheme="http://www.guoyukun.cn/tags/log/"/>
    
      <category term="log4j" scheme="http://www.guoyukun.cn/tags/log4j/"/>
    
      <category term="开发" scheme="http://www.guoyukun.cn/categories/develop/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[连连看思路]]></title>
    <link href="http://www.guoyukun.cn/post/llk/"/>
    <id>http://www.guoyukun.cn/post/llk/</id>
    <published>2014-03-02T03:15:19.000Z</published>
    <updated>2014-03-02T03:15:19.000Z</updated>
    <content type="html"><![CDATA[<img alt="连连看应该怎么算" src="http://gyk001.u.qiniudn.com/images/llk/llk-howto.jpg">
<p>最近看一个朋友在研究<strong>A*算法</strong>，<br>然后得知他打算用<strong>A*</strong>做连连看的配对算法。</p>
<p>OMG！连连看需要这么高大上？雷煞我等屌丝！<br>So，回顾一下大学时写的乞丐版连连看思路。</p>
<a id="more"></a>
<h2 id="连连看规则">连连看规则</h2><ol>
<li>相同的方块才可以连接消除</li>
<li>连接路径上不能有其他方块</li>
<li>连接路径最多有两个拐点（最多三条线）</li>
</ol>
<h2 id="假设场景">假设场景</h2><p>先来看一个场景:<br>A、B方块相同，坐标分别为(C1,R0)和(C5,R2)。<br><img title="场景示例" alt="场景示例" src="http://gyk001.u.qiniudn.com/images/llk/sence.png"></p>
<h2 id="连接方式">连接方式</h2><p>我们看一下可能的连接方式：</p>
<ul>
<li><img title="一个拐点" alt="一个拐点" src="http://gyk001.u.qiniudn.com/images/llk/llk-01.png"></li>
<li><img title="一个拐点" alt="一个拐点" src="http://gyk001.u.qiniudn.com/images/llk/llk-02.png"></li>
<li><img title="之字拐点" alt="之字拐点" src="http://gyk001.u.qiniudn.com/images/llk/llk-03.png"></li>
<li><img title="C型拐点" alt="C型拐点" src="http://gyk001.u.qiniudn.com/images/llk/llk-04.png">
</li>
</ul>
<p>还有就是连连看允许线从地图外面划过，<br>为了方便处理我们把地图外面补一圈（绿框部分是真正的游戏区域）</p>
<ul>
<li><img title="C型左边出界" alt="C型左边出界" src="http://gyk001.u.qiniudn.com/images/llk/llk-05.png"></li>
<li><img title="C型右边出界" alt="C型右边出界" src="http://gyk001.u.qiniudn.com/images/llk/llk-06.png">
</li>
</ul>
<h2 id="找规律">找规律</h2><p>上面的情况是按表面的复杂程度排序，<br>但只要把顺序调整一下其实就是下面这张图：</p>
<ul>
<li><img title="横向分解" alt="横向分解" src="http://gyk001.u.qiniudn.com/images/llk/llk-r1.png">
</li>
</ul>
<p>当然还有没有画出来的纵向的情况：</p>
<ul>
<li><img title="纵向分解" alt="纵向分解" src="http://gyk001.u.qiniudn.com/images/llk/llk-r2.png">
</li>
</ul>
<h2 id="算法实现">算法实现</h2><p>关于算法实现就简单了，只要找到四条关键线以及每次对应的两个关键点，<br>然后直接判断之间是否有障碍物就搞定了，<br>当然还有一些特殊情况需要处理，比如两个方块在一条线上，<br>不过这些都是一些特例了，不特殊处理也就是浪费点计算资源而已</p>
<p>说起计算资源其实还有挺多可以挖掘的地方：<br>比如横纵两种方式就有一些路径是完全重复的，<br>又比如纵向分解图里(C2,R3)如果有障碍物那下面的三条路径都不需要判断了等等</p>
<p>不过话说对于连连看这种计算量很小的情况其实不用那么抠门了</p>
<p>有兴趣可以看看我大学时写的连连看游戏和外挂，<br>我还写了个QQ连连看游戏的外挂，无聊的人可以试试效果哦</p>
<p><a href="https://github.com/gyk001/LLK" target="_blank" rel="external">屌丝版连连看:https://github.com/gyk001/LLK</a><br><a href="https://github.com/gyk001/QQ_LLK_Cheat" target="_blank" rel="external">QQ连连看外挂:https://github.com/gyk001/QQ_LLK_Cheat</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<img alt="连连看应该怎么算" src="http://gyk001.u.qiniudn.com/images/llk/llk-howto.jpg">
<p>最近看一个朋友在研究<strong>A*算法</strong>，<br>然后得知他打算用<strong>A*</strong>做连连看的配对算法。</p>
<p>OMG！连连看需要这么高大上？雷煞我等屌丝！<br>So，回顾一下大学时写的乞丐版连连看思路。</p>]]>
    
    </summary>
    
      <category term="算法" scheme="http://www.guoyukun.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="连连看" scheme="http://www.guoyukun.cn/tags/%E8%BF%9E%E8%BF%9E%E7%9C%8B/"/>
    
      <category term="开发" scheme="http://www.guoyukun.cn/categories/develop/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[java.net.SocketPermission]]></title>
    <link href="http://www.guoyukun.cn/post/java-access-denied-socketpermission/"/>
    <id>http://www.guoyukun.cn/post/java-access-denied-socketpermission/</id>
    <published>2014-02-26T06:03:21.000Z</published>
    <updated>2014-02-26T06:03:21.000Z</updated>
    <content type="html"><![CDATA[<p>以Server模式启动Derby服务竟然抛套接字权限异常:<br><code>access denied (&quot;java.net.SocketPermission&quot; &quot;localhost:1527&quot; &quot;listen,resolve&quot;)</code></p>
<p>解决方案是编辑文件:<br><code>$JAVA_HOME/jre/lib/security/java.policy</code></p>
<p>添加如下规则，问题顺利解决！</p>
<pre><code><span class="title">grant</span> {
    <span class="title">permission</span> java.net.SocketPermission <span class="string">"localhost:*"</span>, <span class="string">"listen,accept,connect,resolve"</span>;
</code></pre><a id="more"></a>
<p>完整的错误堆栈如下：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">➜  db-derby-<span class="number">10.10</span>.<span class="number">1.1</span>-bin  bin/startNetworkServer</span><br><span class="line">Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-<span class="number">8</span></span><br><span class="line">Wed Feb <span class="number">26</span> <span class="number">11</span>:<span class="number">56</span>:<span class="number">16</span> CST <span class="number">2014</span> : 已使用基本服务器安全策略安装了 Security Manager。</span><br><span class="line">Wed Feb <span class="number">26</span> <span class="number">11</span>:<span class="number">56</span>:<span class="number">16</span> CST <span class="number">2014</span> : access denied (<span class="string">"java.net.SocketPermission"</span> <span class="string">"localhost:1527"</span> <span class="string">"listen,resolve"</span>)</span><br><span class="line">java<span class="class">.security</span><span class="class">.AccessControlException</span>: access denied (<span class="string">"java.net.SocketPermission"</span> <span class="string">"localhost:1527"</span> <span class="string">"listen,resolve"</span>)</span><br><span class="line">	at java<span class="class">.security</span><span class="class">.AccessControlContext</span><span class="class">.checkPermission</span>(AccessControlContext<span class="class">.java</span>:<span class="number">372</span>)</span><br><span class="line">	at java<span class="class">.security</span><span class="class">.AccessController</span><span class="class">.checkPermission</span>(AccessController<span class="class">.java</span>:<span class="number">559</span>)</span><br><span class="line">	at java<span class="class">.lang</span><span class="class">.SecurityManager</span><span class="class">.checkPermission</span>(SecurityManager<span class="class">.java</span>:<span class="number">549</span>)</span><br><span class="line">	at java<span class="class">.lang</span><span class="class">.SecurityManager</span><span class="class">.checkListen</span>(SecurityManager<span class="class">.java</span>:<span class="number">1134</span>)</span><br><span class="line">	at java<span class="class">.net</span><span class="class">.ServerSocket</span><span class="class">.bind</span>(ServerSocket<span class="class">.java</span>:<span class="number">375</span>)</span><br><span class="line">	at java<span class="class">.net</span><span class="class">.ServerSocket</span>.&lt;init&gt;(ServerSocket<span class="class">.java</span>:<span class="number">237</span>)</span><br><span class="line">	at javax<span class="class">.net</span><span class="class">.DefaultServerSocketFactory</span><span class="class">.createServerSocket</span>(ServerSocketFactory<span class="class">.java</span>:<span class="number">231</span>)</span><br><span class="line">	at org<span class="class">.apache</span><span class="class">.derby</span><span class="class">.impl</span><span class="class">.drda</span><span class="class">.NetworkServerControlImpl</span><span class="class">.createServerSocket</span>(Unknown Source)</span><br><span class="line">	at org<span class="class">.apache</span><span class="class">.derby</span><span class="class">.impl</span><span class="class">.drda</span><span class="class">.NetworkServerControlImpl</span><span class="class">.access</span>$<span class="number">000</span>(Unknown Source)</span><br><span class="line">	at org<span class="class">.apache</span><span class="class">.derby</span><span class="class">.impl</span><span class="class">.drda</span><span class="class">.NetworkServerControlImpl</span>$<span class="number">1</span>.<span class="function"><span class="title">run</span><span class="params">(Unknown Source)</span></span></span><br><span class="line">	at org<span class="class">.apache</span><span class="class">.derby</span><span class="class">.impl</span><span class="class">.drda</span><span class="class">.NetworkServerControlImpl</span>$<span class="number">1</span>.<span class="function"><span class="title">run</span><span class="params">(Unknown Source)</span></span></span><br><span class="line">	at java<span class="class">.security</span><span class="class">.AccessController</span><span class="class">.doPrivileged</span>(Native Method)</span><br><span class="line">	at org<span class="class">.apache</span><span class="class">.derby</span><span class="class">.impl</span><span class="class">.drda</span><span class="class">.NetworkServerControlImpl</span><span class="class">.blockingStart</span>(Unknown Source)</span><br><span class="line">	at org<span class="class">.apache</span><span class="class">.derby</span><span class="class">.impl</span><span class="class">.drda</span><span class="class">.NetworkServerControlImpl</span><span class="class">.executeWork</span>(Unknown Source)</span><br><span class="line">	at org<span class="class">.apache</span><span class="class">.derby</span><span class="class">.drda</span><span class="class">.NetworkServerControl</span><span class="class">.main</span>(Unknown Source)</span><br></pre></td></tr></table></figure>
<p>主要参考了<a href="http://blog.yourtion.com/java-access-denied-socketpermission-solution.html" target="_blank" rel="external">郭宇翔的博客</a>，Tks！</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>以Server模式启动Derby服务竟然抛套接字权限异常:<br><code>access denied (&quot;java.net.SocketPermission&quot; &quot;localhost:1527&quot; &quot;listen,resolve&quot;)</code></p>
<p>解决方案是编辑文件:<br><code>$JAVA_HOME/jre/lib/security/java.policy</code></p>
<p>添加如下规则，问题顺利解决！</p>
<pre><code><span class="title">grant</span> {
    <span class="title">permission</span> java.net.SocketPermission <span class="string">"localhost:*"</span>, <span class="string">"listen,accept,connect,resolve"</span>;
</code></pre>]]>
    
    </summary>
    
      <category term="Java" scheme="http://www.guoyukun.cn/tags/java/"/>
    
      <category term="开发" scheme="http://www.guoyukun.cn/categories/develop/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ServiceMix打包feature报错NoSuchMethodError]]></title>
    <link href="http://www.guoyukun.cn/post/features-maven-plugin-nosuchmethoderror/"/>
    <id>http://www.guoyukun.cn/post/features-maven-plugin-nosuchmethoderror/</id>
    <published>2014-02-25T09:04:14.000Z</published>
    <updated>2014-02-25T09:04:14.000Z</updated>
    <content type="html"><![CDATA[<p>ServiceMix打包feature时报了个莫名其妙的错误，google一把原来是maven的bug，<br>好在3.0.5以后就修复了，果断换成新版本，问题解决。<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="constant">ERROR]</span> <span class="constant">Failed </span>to execute goal org.apache.karaf.<span class="symbol">tooling:</span>features-maven-<span class="symbol">plugin:</span><span class="number">2.2</span>.<span class="number">5</span><span class="symbol">:generate-features-file</span> (validate) </span><br><span class="line">on project feature.<span class="symbol">protocol:</span> </span><br><span class="line"><span class="constant">Execution </span>validate of goal org.apache.karaf.<span class="symbol">tooling:</span>features-maven-<span class="symbol">plugin:</span><span class="number">2.2</span>.<span class="number">5</span><span class="symbol">:generate-features-file</span> <span class="symbol">failed:</span></span><br><span class="line"> <span class="constant">An API </span>incompatibility was encountered <span class="keyword">while</span> executing org.apache.karaf.<span class="symbol">tooling:</span>features-maven-<span class="symbol">plugin:</span><span class="number">2.2</span>.<span class="number">5</span><span class="symbol">:generate-features-file</span><span class="symbol">:</span></span><br><span class="line">  java.lang.<span class="constant">NoSuchMethodError:</span> org.apache.maven.artifact.metadata.<span class="constant">ArtifactMetadataRetrievalException:</span> method &lt;init&gt;(<span class="constant">Ljava/</span>lang/<span class="constant">String;</span>)<span class="constant">V </span><span class="keyword">not</span> found</span><br></pre></td></tr></table></figure></p>
<p>详见maven的issue</p>
<p><a href="http://jira.codehaus.org/browse/MNG-5233" target="_blank" rel="external">http://jira.codehaus.org/browse/MNG-5233</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>ServiceMix打包feature时报了个莫名其妙的错误，google一把原来是maven的bug，<br>好在3.0.5以后就修复了，果断换成新版本，问题解决。<br><figure class="highlight elixir"><table><tr><td cl]]>
    </summary>
    
      <category term="Maven" scheme="http://www.guoyukun.cn/tags/Maven/"/>
    
      <category term="ServiceMix" scheme="http://www.guoyukun.cn/tags/ServiceMix/"/>
    
      <category term="开发" scheme="http://www.guoyukun.cn/categories/develop/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[xmind-3.4.1破解]]></title>
    <link href="http://www.guoyukun.cn/post/xmind-341-crack/"/>
    <id>http://www.guoyukun.cn/post/xmind-341-crack/</id>
    <published>2014-02-10T17:08:00.000Z</published>
    <updated>2014-02-10T17:08:00.000Z</updated>
    <content type="html"><![CDATA[<p>今天想把astah pro 6.8破解了，不过代码经过混淆，反编译后基本没法看，最终放弃了。</p>
<p>用XMind画图时又突起邪念，<br>网上已经有人破解过了，并且注册机也已经实现，不过两个人都没有放出破解补丁。</p>
<p>经过摸索，终于完成了破解，奈何实在不想研究加密部分，所以没有做注册机。</p>
<p>因为采用替换jar包的方式，所以Windows、Linux、Mac都应该是通用的。</p>
<p>注意版本是最新的<strong>XMind 2013(3.4.1)</strong>，其他版本不一定能用。</p>
<p>破解截图:</p>
<img src="http://gyk001.u.qiniudn.com/images/crack/xmind-about.png">
<a id="more"></a>
<p><br></p>
<img src="http://gyk001.u.qiniudn.com/images/crack/xmind.png">
<p>使用方法: </p>
<ol>
<li>使用附件覆盖plugins目录下对应文件</li>
<li>点击菜单【帮助】》【序列号…】</li>
<li>点击链接【如已购买并激活，请查看/修改序列号！】</li>
<li>注册信息随便填</li>
<li>点击按钮【确定】</li>
</ol>
<p><a href="http://gyk001.u.qiniudn.com/file/net.xmind.verify_3.4.1.201401221918.jar" target="_blank" rel="external">破解补丁下载</a></p>
<p>PS. 序列号填<code>yisufuyou</code>才能激活Pro版的哦，其他都是Plus版</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>今天想把astah pro 6.8破解了，不过代码经过混淆，反编译后基本没法看，最终放弃了。</p>
<p>用XMind画图时又突起邪念，<br>网上已经有人破解过了，并且注册机也已经实现，不过两个人都没有放出破解补丁。</p>
<p>经过摸索，终于完成了破解，奈何实在不想研究加密部分，所以没有做注册机。</p>
<p>因为采用替换jar包的方式，所以Windows、Linux、Mac都应该是通用的。</p>
<p>注意版本是最新的<strong>XMind 2013(3.4.1)</strong>，其他版本不一定能用。</p>
<p>破解截图:</p>
<img src="http://gyk001.u.qiniudn.com/images/crack/xmind-about.png">]]>
    
    </summary>
    
      <category term="xmind" scheme="http://www.guoyukun.cn/tags/xmind/"/>
    
      <category term="破解" scheme="http://www.guoyukun.cn/tags/crack/"/>
    
      <category term="工具" scheme="http://www.guoyukun.cn/categories/tools/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Vampire]]></title>
    <link href="http://www.guoyukun.cn/post/vampire/"/>
    <id>http://www.guoyukun.cn/post/vampire/</id>
    <published>2014-01-07T16:48:53.000Z</published>
    <updated>2014-01-07T16:48:53.000Z</updated>
    <content type="html"><![CDATA[<p>喜欢看所有吸血鬼的影片<br>不管故事多么蹩脚或者邪恶<br>因为他们有永恒的时间去追寻、去守护心中至爱<br>但是时间如此易逝<br>这些我们都没有资格哪怕只是等待</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>喜欢看所有吸血鬼的影片<br>不管故事多么蹩脚或者邪恶<br>因为他们有永恒的时间去追寻、去守护心中至爱<br>但是时间如此易逝<br>这些我们都没有资格哪怕只是等待</p>
]]>
    </summary>
    
      <category term="生活" scheme="http://www.guoyukun.cn/categories/life/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[屏幕换好了，LG -> 三星]]></title>
    <link href="http://www.guoyukun.cn/post/mbp-new-display/"/>
    <id>http://www.guoyukun.cn/post/mbp-new-display/</id>
    <published>2014-01-07T14:04:13.000Z</published>
    <updated>2014-01-07T14:04:13.000Z</updated>
    <content type="html"><![CDATA[<p>经过五趟折腾，MacBook Pro的屏幕终于换好了，<br>话说苹果的售后真的有点问题，手续繁琐，效率低下。</p>
<p>电脑的上半部分整个换掉，用了一年换个新的感觉真不错。<br>这次换修不仅残影问题解决了，还发现以前LG屏幕换成三星的了</p>
<img src="http://gyk001.u.qiniudn.com/images/new-display-samsung.jpg">
]]></content>
    <summary type="html">
    <![CDATA[<p>经过五趟折腾，MacBook Pro的屏幕终于换好了，<br>话说苹果的售后真的有点问题，手续繁琐，效率低下。</p>
<p>电脑的上半部分整个换掉，用了一年换个新的感觉真不错。<br>这次换修不仅残影问题解决了，还发现以前LG屏幕换成三星的了</p>
<img src="]]>
    </summary>
    
      <category term="Mac" scheme="http://www.guoyukun.cn/tags/mac/"/>
    
      <category term="生活" scheme="http://www.guoyukun.cn/categories/life/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Textastic for iPad试用]]></title>
    <link href="http://www.guoyukun.cn/post/textastic-evaluation/"/>
    <id>http://www.guoyukun.cn/post/textastic-evaluation/</id>
    <published>2013-12-10T08:02:50.000Z</published>
    <updated>2013-12-10T08:02:50.000Z</updated>
    <content type="html"><![CDATA[<img src="http://gyk001.u.qiniudn.com/images/textastic/overview.png">
<h2 id="优点😄">优点😄</h2><ul>
<li>键盘补充键相当方便，支持滑动输入</li>
<li>常用特殊字符都有，覆盖markdown语法</li>
<li>支持各种语法高亮，并且自带多种配色主题</li>
<li>markdown预览</li>
<li>markdown支持GFM风格表格</li>
<li>支持TOC目录</li>
<li>支持直接发送markdown为html邮件</li>
<li>可以通过<code>open in</code>功能共享文件内容</li>
<li>支持textexpander</li>
<li>全屏编辑</li>
</ul>
<h2 id="缺点😢">缺点😢</h2><ul>
<li>移动光标键悬浮按钮不能移到写作区域外</li>
<li>textexpander只能由原生键盘触发，无法通过键盘补充键触发</li>
<li>不支持撤销，重做机制</li>
<li>包含Emojis表情的目录显示TOC有bug</li>
<li>服务支持太少，不能简单连接到Evernote等服务</li>
<li><del>不能复制markdown对应的html</del></li>
<li>markdown不能切换引擎，不支持GFM代码段，MutliMarkdown语法等</li>
<li>没有Markdown快速插入链接，图片等方法</li>
<li>Markdown生成html不能自定义CSS</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<img src="http://gyk001.u.qiniudn.com/images/textastic/overview.png">
<h2 id="优点😄">优点😄</h2><ul>
<li>键盘补充键相当方便，支持滑动输入</li>
<li>常用特殊字符都有，覆盖m]]>
    </summary>
    
      <category term="textastic" scheme="http://www.guoyukun.cn/tags/textastic/"/>
    
      <category term="工具" scheme="http://www.guoyukun.cn/categories/tools/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[寄红唇]]></title>
    <link href="http://www.guoyukun.cn/post/nerver-believe/"/>
    <id>http://www.guoyukun.cn/post/nerver-believe/</id>
    <published>2013-12-06T12:05:04.000Z</published>
    <updated>2013-12-06T12:05:04.000Z</updated>
    <content type="html"><![CDATA[<p>从未识得，终日浑噩皆浮云<br>此生造化，自见伊人三月春<br>不知悔改，千辛枉费何为已<br>再伤累累，自欺欺人难抽身<br>相知不易，心有所属入无门<br>信劫如命，万缘尽灭海底针<br>爱恨难分，惟愿不染求诸神<br>情非得已，永世轮回不做人</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>从未识得，终日浑噩皆浮云<br>此生造化，自见伊人三月春<br>不知悔改，千辛枉费何为已<br>再伤累累，自欺欺人难抽身<br>相知不易，心有所属入无门<br>信劫如命，万缘尽灭海底针<br>爱恨难分，惟愿不染求诸神<br>情非得已，永世轮回不做人</p>
]]>
    </summary>
    
      <category term="生活" scheme="http://www.guoyukun.cn/categories/life/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[调解TextExpander和中文输入法的矛盾]]></title>
    <link href="http://www.guoyukun.cn/post/textexpander-cooperate-with-chinese-input-method/"/>
    <id>http://www.guoyukun.cn/post/textexpander-cooperate-with-chinese-input-method/</id>
    <published>2013-11-28T05:21:27.000Z</published>
    <updated>2013-11-28T05:21:27.000Z</updated>
    <content type="html"><![CDATA[<p>前几天写过<a href="http://www.guoyukun.cn/post/textexpander-not-work/" target="_blank" rel="external">解决TextExpander解决失灵</a>的办法,<br>最近发现失灵的现象相当严重，只要是中文输入法状态下完全没法使用TextExpander进行展开，<br>人品再好也不能次次都中奖吧，Google了一把原来TE到3.3.4以后就不支持在中文日文等输入法状态下进行展开了，<br>我刚升级到4.x了，所以中文状态下面TE直接变成了废柴。</p>
<p>TE是名副其实的神器，就这样废掉太可惜了，好在还是有解决方案的。</p>
<p>英文好的可以看<a href="http://smilesoftware.com/blog/entry/textexpander-3.3.4-and-japanese-chinese-etc.-input-methods" target="_blank" rel="external">原文</a>,懒的直接看下面就OK了</p>
<a id="more"></a>
<img src="http://gyk001.u.qiniudn.com/images/textexpander/TEIMPrefSetter.jpg">
<ol>
<li>退出TextExpander</li>
<li>启动TEIMPrefSetter</li>
<li>列表里包括TextExpander<em>不会</em>展开的语言，选择中文，点击<code>-</code>按钮从列表删除中文</li>
<li>点击<code>Save</code>按钮保存配置</li>
<li>退出TEIMPrefSetter</li>
<li>启动TextExpander，切换到中文</li>
<li>测试一下下神器复活了！</li>
</ol>
<p>TEIMPrefSetter下载地址: <a href="http://gyk001.u.qiniudn.com/file/TEIMPrefSetter.zip" target="_blank" rel="external">本地下载</a> , <a href="http://smilesoftware.com/downloads/TEIMPrefSetter.zip" target="_blank" rel="external">原始地址</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>前几天写过<a href="http://www.guoyukun.cn/post/textexpander-not-work/">解决TextExpander解决失灵</a>的办法,<br>最近发现失灵的现象相当严重，只要是中文输入法状态下完全没法使用TextExpander进行展开，<br>人品再好也不能次次都中奖吧，Google了一把原来TE到3.3.4以后就不支持在中文日文等输入法状态下进行展开了，<br>我刚升级到4.x了，所以中文状态下面TE直接变成了废柴。</p>
<p>TE是名副其实的神器，就这样废掉太可惜了，好在还是有解决方案的。</p>
<p>英文好的可以看<a href="http://smilesoftware.com/blog/entry/textexpander-3.3.4-and-japanese-chinese-etc.-input-methods">原文</a>,懒的直接看下面就OK了</p>]]>
    
    </summary>
    
      <category term="Mac" scheme="http://www.guoyukun.cn/tags/mac/"/>
    
      <category term="textexpander" scheme="http://www.guoyukun.cn/tags/textexpander/"/>
    
      <category term="工具" scheme="http://www.guoyukun.cn/categories/tools/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Kettle无法启动]]></title>
    <link href="http://www.guoyukun.cn/post/kettle-start-array-index-out-of-bounds-exception/"/>
    <id>http://www.guoyukun.cn/post/kettle-start-array-index-out-of-bounds-exception/</id>
    <published>2013-11-26T05:52:37.000Z</published>
    <updated>2013-11-26T05:52:37.000Z</updated>
    <content type="html"><![CDATA[<p>最近研究ETL，下载了<a href="kettle">Kettle 5.0.1</a>,启动以后语言改成中文，重启。<br>然后就发现悲剧的无法启动了，<br>双击应用图标直接关闭，用脚本启动会抛出错误<code>ArrayIndexOutOfBoundsException</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10140;  data-integration  ./spoon.sh&#10;/Volumes/Work/SoftPkg/data-integration&#10;2013-11-26 13:25:56.032 java[26618:507] [Java CocoaComponent compatibility mode]: Enabled&#10;2013-11-26 13:25:56.032 java[26618:507] [Java CocoaComponent compatibility mode]: Setting timeout for SWT to 0.100000&#10;2013-11-26 13:25:56.077 java[26618:507] *** WARNING: Method userSpaceScaleFactor in class NSView is deprecated on 10.7 and later. It should not be used in new applications. Use convertRectToBacking: instead.&#10;2013-11-26 13:25:56.408 java[26618:507] *** WARNING: Method userSpaceScaleFactor in class NSWindow is deprecated on 10.7 and later. It should not be used in new applications. Use convertRectToBacking: instead.&#10;2013/11/26 13:25:58 - General - ERROR (version 5.0.1-stable, build 1 from 2013-11-15_16-08-58 by buildguy) : Error starting Spoon shell&#10;2013/11/26 13:25:58 - General - ERROR (version 5.0.1-stable, build 1 from 2013-11-15_16-08-58 by buildguy) : java.lang.ArrayIndexOutOfBoundsException: 5&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.di.ui.spoon.dialog.TipsDialog.getTip(TipsDialog.java:199)&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.di.ui.spoon.dialog.TipsDialog.&#60;init&#62;(TipsDialog.java:84)&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.di.ui.spoon.Spoon.start(Spoon.java:7334)&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.di.ui.spoon.Spoon.createContents(Spoon.java:8657)&#10;2013/11/26 13:25:58 - General - &#9;at org.eclipse.jface.window.Window.create(Window.java:426)&#10;2013/11/26 13:25:58 - General - &#9;at org.eclipse.jface.window.Window.open(Window.java:785)&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.di.ui.spoon.Spoon.start(Spoon.java:8672)&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.di.ui.spoon.Spoon.main(Spoon.java:625)&#10;2013/11/26 13:25:58 - General - &#9;at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#10;2013/11/26 13:25:58 - General - &#9;at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&#10;2013/11/26 13:25:58 - General - &#9;at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&#10;2013/11/26 13:25:58 - General - &#9;at java.lang.reflect.Method.invoke(Method.java:597)&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.commons.launcher.Launcher.main(Launcher.java:134)&#10;stopping</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>解决方案：删除主目录下的<code>.kettle</code>目录</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10140;  ~ git:(master) &#10007; rm -rf .kettle</span><br></pre></td></tr></table></figure>
<p>删除<code>.pentaho</code>目录是没有用的，虽然Kettle已经不叫Kettle了，<br> 但是配置依然存放在<code>~/.kettle</code>目录下面</p>
<p>语言改为中文的正确方法是只改第一个选项(Preferred Language)为中文。</p>
<img src="http://gyk001.u.qiniudn.com/images/kettle/lang_cfg.png">
<p>当时就是因为没有仔细看才悲剧的，两个选项分别为首选语言和第二语言的意思，<br>全部改成中文会因为有些功能组件没有本地化支持而挂掉！</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>最近研究ETL，下载了<a href="kettle">Kettle 5.0.1</a>,启动以后语言改成中文，重启。<br>然后就发现悲剧的无法启动了，<br>双击应用图标直接关闭，用脚本启动会抛出错误<code>ArrayIndexOutOfBoundsException</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10140;  data-integration  ./spoon.sh&#10;/Volumes/Work/SoftPkg/data-integration&#10;2013-11-26 13:25:56.032 java[26618:507] [Java CocoaComponent compatibility mode]: Enabled&#10;2013-11-26 13:25:56.032 java[26618:507] [Java CocoaComponent compatibility mode]: Setting timeout for SWT to 0.100000&#10;2013-11-26 13:25:56.077 java[26618:507] *** WARNING: Method userSpaceScaleFactor in class NSView is deprecated on 10.7 and later. It should not be used in new applications. Use convertRectToBacking: instead.&#10;2013-11-26 13:25:56.408 java[26618:507] *** WARNING: Method userSpaceScaleFactor in class NSWindow is deprecated on 10.7 and later. It should not be used in new applications. Use convertRectToBacking: instead.&#10;2013/11/26 13:25:58 - General - ERROR (version 5.0.1-stable, build 1 from 2013-11-15_16-08-58 by buildguy) : Error starting Spoon shell&#10;2013/11/26 13:25:58 - General - ERROR (version 5.0.1-stable, build 1 from 2013-11-15_16-08-58 by buildguy) : java.lang.ArrayIndexOutOfBoundsException: 5&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.di.ui.spoon.dialog.TipsDialog.getTip(TipsDialog.java:199)&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.di.ui.spoon.dialog.TipsDialog.&#60;init&#62;(TipsDialog.java:84)&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.di.ui.spoon.Spoon.start(Spoon.java:7334)&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.di.ui.spoon.Spoon.createContents(Spoon.java:8657)&#10;2013/11/26 13:25:58 - General - &#9;at org.eclipse.jface.window.Window.create(Window.java:426)&#10;2013/11/26 13:25:58 - General - &#9;at org.eclipse.jface.window.Window.open(Window.java:785)&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.di.ui.spoon.Spoon.start(Spoon.java:8672)&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.di.ui.spoon.Spoon.main(Spoon.java:625)&#10;2013/11/26 13:25:58 - General - &#9;at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#10;2013/11/26 13:25:58 - General - &#9;at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&#10;2013/11/26 13:25:58 - General - &#9;at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&#10;2013/11/26 13:25:58 - General - &#9;at java.lang.reflect.Method.invoke(Method.java:597)&#10;2013/11/26 13:25:58 - General - &#9;at org.pentaho.commons.launcher.Launcher.main(Launcher.java:134)&#10;stopping</span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
      <category term="etl" scheme="http://www.guoyukun.cn/tags/etl/"/>
    
      <category term="kettle" scheme="http://www.guoyukun.cn/tags/kettle/"/>
    
      <category term="工具" scheme="http://www.guoyukun.cn/categories/tools/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Windows下RabbitMQ集群步骤]]></title>
    <link href="http://www.guoyukun.cn/post/rabbitmq-cluster-on-windows/"/>
    <id>http://www.guoyukun.cn/post/rabbitmq-cluster-on-windows/</id>
    <published>2013-11-22T06:46:58.000Z</published>
    <updated>2013-11-22T06:46:58.000Z</updated>
    <content type="html"><![CDATA[<p>项目需要RabbitMQ集群环境，服务器只有Windows，<br>环境为64位Windows Server 2008，RabbitMQ版本为3.1.5<br>集群为两个mq结点，磁盘结点和内存结点各一个。<br>Linux搭建集群没什么难度，直接安装官网的操作就可以顺利搞定，<br>Windows就比较麻烦，故经过一番摸索终于搭建成功，记录一下步骤。</p>
<h2 id="安装RabbitMQ">安装RabbitMQ</h2><ol>
<li>下载Erlang安装包:<br>地址:<a href="">http://www.erlang.org/download/otp_win64_R16B02.exe</a></li>
<li>下载RabbitMQ安装包:<br>地址:<a href="">http://www.rabbitmq.com/releases/rabbitmq-server/v3.1.5/rabbitmq-server-3.1.5.exe</a></li>
<li>安装Erlang到D:\Deploy\ERL</li>
<li>安装RabbitMQ到D:\Deploy\RabbitMQ<ul>
<li>安装时<strong>取消勾选</strong>安装为服务：<code>RabbitMQ Service</code><img title="安装界面不选安装为服务" alt="安装界面不选安装为服务" src="http://gyk001.u.qiniudn.com/images/mqcluster/install_without_service.png"><a id="more"></a></li>
<li>如果忘记取消勾选，安装完成时按如下操作：<br>【开始菜单】-&gt;【所有程序】-&gt;【RabbitMQ Server】-&gt;【RabbitMQ Service - remove】     <img title="删除MQ服务" alt="删除MQ服务" src="http://gyk001.u.qiniudn.com/images/mqcluster/remove_mq_service.png"></li>
</ul>
</li>
<li><p>建立RabbitMQ配置文件夹目录</p>
 <figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="envvar">%APPDATA%</span></span><br><span class="line"><span class="built_in">mkdir</span> RabbitMQ</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置系统环境变量<code>RABBITMQ_BASE</code>为<code>D:\Data\rabbit</code></p>
</li>
<li>下载配置文件放到<code>D:\Data\rabbit</code>目录下<ul>
<li>插件配置：<a href="http://gyk001.u.qiniudn.com/blog/mqcluster/enabled_plugins" target="_blank" rel="external">enabled_plugins</a></li>
<li>节点配置: <a href="doc/config/rabbitmq.config">rabbitmq.config</a></li>
</ul>
</li>
<li><p>修改ErLang的cookie</p>
<ul>
<li>编辑 <code>C:\Users\Administrator\.erlang.cookie</code></li>
<li>编辑之前先去掉只读属性，如文件不存在手动新建</li>
<li>内容随意(如<code>wspt-guoyukun-2013</code>)，保证两台windows上的一致即可</li>
<li>编辑完成以后再<strong>恢复</strong>只读属性的勾选状态</li>
</ul>
</li>
<li><p>测试mq启动：</p>
<ul>
<li>双击<code>D:\Deploy\RabbitMQ\rabbitmq-server.3.1.5\sbin\rabbitmq-server</code></li>
<li>浏览器查看是否正常。地址：<a href="http://localhost:15672" target="_blank" rel="external">http://localhost:15672</a> ， 用户名密码：guest/guest</li>
<li>查看目录<code>D:\Data\rabbit</code>内是否正常生成<code>db</code>和<code>log</code>文件夹</li>
</ul>
</li>
</ol>
<h2 id="RabbitMQ集群搭建">RabbitMQ集群搭建</h2><ol>
<li>确认<strong>两台</strong>机器的RabbitMQ都已安装好，且 <strong>正在运行</strong></li>
<li>搭建集群(此操作只需要在一台机器上进行)     <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\Deploy\RabbitMQ\rabbitmq-server-3.1.5\sbn&#62; rabbitmqctl.bat stop_app&#10;Stopping node rabbit@DEMOAPP1 ...&#10;... done.&#10;&#10;D:\Deploy\RabbitMQ\rabbitmq-server-3.1.5\sbn&#62; rabbitmqctl.bat reset&#10;Resetting node rabbit@DEMOAPP1 ...&#10;... done.&#10;&#10;D:\Deploy\RabbitMQ\rabbitmq-server-3.1.5\sbn&#62; rabbitmqctl.bat join_cluster rabbit@DEMOAPP2 --ram&#10;Clustering node rabbit@DEMOAPP1 with rabbit@DEMOAPP2 ...&#10;... done.&#10;&#10;D:\Deploy\RabbitMQ\rabbitmq-server-3.1.5\sbn&#62; rabbitmqctl.bat start_app&#10;Starting node rabbit@DEMOAPP1 ...&#10;... done.</span><br></pre></td></tr></table></figure>
</li>
</ol>
	D:\Deploy\RabbitMQ\rabbitmq-server-3.1.5\sbn> rabbitmqctl.bat stop_app
	Stopping node rabbit@DEMOAPP1 ...
	... done.

	D:\Deploy\RabbitMQ\rabbitmq-server-3.1.5\sbn> rabbitmqctl.bat reset
	Resetting node rabbit@DEMOAPP1 ...
	... done.

	D:\Deploy\RabbitMQ\rabbitmq-server-3.1.5\sbn> rabbitmqctl.bat join_cluster rabbit@DEMOAPP2 --ram
	Clustering node rabbit@DEMOAPP1 with rabbit@DEMOAPP2 ...
	... done.

	D:\Deploy\RabbitMQ\rabbitmq-server-3.1.5\sbn> rabbitmqctl.bat start_app
	Starting node rabbit@DEMOAPP1 ...
	... done.
<ol>
<li><p>查看集群是否正常</p>
 <img title="查看集群是否正常" alt="查看集群是否正常" src="http://gyk001.u.qiniudn.com/images/mqcluster/cluster_check.png">
</li>
<li><p>修改配置文件<code>D:\Data\rabbit\rabbitmq.config</code></p>
<ul>
<li>在<code>tcp_listeners</code>行后添加一行<code>cluster_nodes</code>(注意两行之间有个<code>,</code>)</li>
<li><p>将<code>rabbit@</code>后面的部分换成州市两台应用的主机名，如：</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;<span class="atom">mnesia</span>, [&#123;<span class="atom">dump_log_write_threshold</span>, <span class="number">1000</span>&#125;]&#125;,</span><br><span class="line">    &#123;<span class="atom">rabbit</span>, [</span><br><span class="line">		&#123;<span class="atom">tcp_listeners</span>, [<span class="number">5673</span>]&#125;,</span><br><span class="line">		&#123;<span class="atom">cluster_nodes</span>,&#123;[<span class="string">'rabbit@DEMOAPP1'</span>,<span class="string">'rabbit@DEMOAPP2'</span>],<span class="atom">ram</span>&#125;&#125;</span><br><span class="line">    ]&#125;</span><br><span class="line">].</span><br></pre></td></tr></table></figure>
</li>
<li><p>行尾的<code>,ram</code>在运行集群命令的机器才有，另一台没有，如</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;<span class="atom">mnesia</span>, [&#123;<span class="atom">dump_log_write_threshold</span>, <span class="number">1000</span>&#125;]&#125;,</span><br><span class="line">    &#123;<span class="atom">rabbit</span>, [</span><br><span class="line">		&#123;<span class="atom">tcp_listeners</span>, [<span class="number">5673</span>]&#125;,</span><br><span class="line">		&#123;<span class="atom">cluster_nodes</span>,&#123;[<span class="string">'rabbit@DEMOAPP1'</span>,<span class="string">'rabbit@DEMOAPP2'</span>]&#125;&#125;</span><br><span class="line">    ]&#125;</span><br><span class="line">].</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>测试配置文件正确性</p>
<p>两台机器都关闭正在运行的RabbitMQ，然后重新运行一下，</p>
<ul>
<li>正常运行说明配置文件正确</li>
<li>运行出错需要重新检查配置文件</li>
</ul>
</li>
<li><p><del>安装为服务(加载配置有问题，暂不做)</del></p>
</li>
</ol>
<h2 id="常见错误">常见错误</h2><ul>
<li><p><code>ERROR: ode with name &quot;rabbit&quot; already running on ...</code><br>此错误是由于RabbitMQ已经启动，需要停止相关的服务或关闭<code>rabbitmq-server.bat</code>的运行窗口</p>
<img title="错误信息：节点已经启动！" alt="错误信息：节点已经启动！" src="http://gyk001.u.qiniudn.com/images/mqcluster/err_already_running.png">
</li>
<li><p><code>Node  thinks it&#39;s clusterred with node ,but disagrees</code><br>此错误由于RabbitMQ集群缓存不一致<br>需要删除目录两台机器的<code>D:\Data\rabbit\db</code>目录后重新启动MQ</p>
<img alt="错误信息：节点不同意集群！" title="错误信息：节点不同意集群！" src="http://gyk001.u.qiniudn.com/images/mqcluster/err_cluster_disagrees.png">
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>项目需要RabbitMQ集群环境，服务器只有Windows，<br>环境为64位Windows Server 2008，RabbitMQ版本为3.1.5<br>集群为两个mq结点，磁盘结点和内存结点各一个。<br>Linux搭建集群没什么难度，直接安装官网的操作就可以顺利搞定，<br>Windows就比较麻烦，故经过一番摸索终于搭建成功，记录一下步骤。</p>
<h2 id="安装RabbitMQ">安装RabbitMQ</h2><ol>
<li>下载Erlang安装包:<br>地址:<a href="">http://www.erlang.org/download/otp_win64_R16B02.exe</a></li>
<li>下载RabbitMQ安装包:<br>地址:<a href="">http://www.rabbitmq.com/releases/rabbitmq-server/v3.1.5/rabbitmq-server-3.1.5.exe</a></li>
<li>安装Erlang到D:\Deploy\ERL</li>
<li>安装RabbitMQ到D:\Deploy\RabbitMQ<ul>
<li>安装时<strong>取消勾选</strong>安装为服务：<code>RabbitMQ Service</code><img title="安装界面不选安装为服务" alt="安装界面不选安装为服务" src="http://gyk001.u.qiniudn.com/images/mqcluster/install_without_service.png">]]>
    
    </summary>
    
      <category term="rabbitmq" scheme="http://www.guoyukun.cn/tags/rabbitmq/"/>
    
      <category term="windows" scheme="http://www.guoyukun.cn/tags/windows/"/>
    
      <category term="集群" scheme="http://www.guoyukun.cn/tags/cluster/"/>
    
      <category term="运维管理" scheme="http://www.guoyukun.cn/categories/operation/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Linux下SQLPlus支持历史记录的工具rlwrap]]></title>
    <link href="http://www.guoyukun.cn/post/linux-sqlplus-history-with-rlwrap/"/>
    <id>http://www.guoyukun.cn/post/linux-sqlplus-history-with-rlwrap/</id>
    <published>2013-11-20T02:29:31.000Z</published>
    <updated>2013-11-20T02:29:31.000Z</updated>
    <content type="html"><![CDATA[<p>众所周知，Linux下面的SQLPlus不支持上下键历史记录，左右键移动光标，<br>作为一个命令行工具来说，Linux版竟然不如Windows版好用，真是悲哀 </p>
<h2 id="神器rlwrap出场。">神器<code>rlwrap</code>出场。</h2><p>这个工具其实是一个<code>readline</code>的包装库，可以使任意命令支持<code>readline</code>风格的输入，<br>上下键翻阅历史记录，左右键移动光标，<code>ctrl+a</code>移动行首，<code>ctrl+e</code>移动行尾等等，<br>如欲了解详细，请移步官网 <a href="">http://utopia.knoware.nl/~hlub/uck/rlwrap/#rlwrap</a></p>
<p>命令控对于<code>readline</code>是再熟悉不过了，吸引力当然也是不在话下</p>
<p>嫌下面啰嗦的直接看Gist:<a href="">https://gist.github.com/gyk001/7557096</a></p>
<a id="more"></a>
<h2 id="安装">安装</h2><p>yum库里没有，采用源码编译安装.<br>要先安装<code>readline</code>和<code>readline</code>的开发包<br>然后就是常规的编译安装了<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@centos]~<span class="comment"># yum install readline readline-devel</span></span><br><span class="line">[root@centos]~<span class="comment"># wget http://utopia.knoware.nl/~hlub/uck/rlwrap/rlwrap-0.37.tar.gz</span></span><br><span class="line">[root@centos]~<span class="comment"># tar -xzvf rlwrap-0.37.tar.gz</span></span><br><span class="line">[root@centos]~<span class="comment"># cd rlwrap-0.37</span></span><br><span class="line">[root@centos]~/rlwrap-<span class="number">0.37</span><span class="comment"># ./configure</span></span><br><span class="line">[root@centos]~/rlwrap-<span class="number">0.37</span><span class="comment"># make &amp;&amp; make install</span></span><br><span class="line">[root@centos]~/rlwrap-<span class="number">0.37</span><span class="comment"># #测试一下，有如下输出说明安装成功</span></span><br><span class="line">[root@centos]~/rlwrap-<span class="number">0.37</span><span class="comment"># /usr/local/bin/rlwrap</span></span><br><span class="line">Usage: rlwrap [options] <span class="built_in">command</span> ...</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  <span class="operator">-a</span>[password:]              --always-readline[=password:]</span><br><span class="line">  -A                         --ansi-colour-aware</span><br><span class="line">  -b  &lt;chars&gt;                --break-chars=&lt;chars&gt;</span><br><span class="line">  -c                         --complete-filenames</span><br><span class="line">  -C  &lt;name|N&gt;               --command-name=&lt;name|N&gt;</span><br><span class="line">  -D  &lt;<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>&gt;                --history-no-dupes=&lt;<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>&gt;</span><br><span class="line">  <span class="operator">-f</span>  &lt;completion list&gt;      --file=&lt;completion list&gt;</span><br><span class="line">  -g  &lt;regexp&gt;               --forget-matching=&lt;regexp&gt;</span><br><span class="line">  -h                         --help</span><br><span class="line">  -H  &lt;file&gt;                 --history-filename=&lt;file&gt;</span><br><span class="line">  -i                         --case-insensitive</span><br><span class="line">  -I                         --pass-sigint-as-sigterm</span><br><span class="line">  <span class="operator">-l</span>  &lt;file&gt;                 --logfile=&lt;file&gt;</span><br><span class="line">  -n                         --no-warnings</span><br><span class="line">  -N                         --no-children</span><br><span class="line">  -o                         --one-shot</span><br><span class="line">  -O  &lt;regexp&gt;               --only-cook=&lt;regexp&gt;</span><br><span class="line">  -p[colour]                 --prompt-colour[=colour]</span><br><span class="line">  -P  &lt;input&gt;                --pre-given=&lt;input&gt;</span><br><span class="line">  -q  &lt;chars&gt;                --quote-characters=&lt;chars&gt;</span><br><span class="line">  -m[newline substitute]     --multi-line[=newline substitute]</span><br><span class="line">  -r                         --remember</span><br><span class="line">  -R                         --renice</span><br><span class="line">  -v                         --version</span><br><span class="line">  <span class="operator">-s</span>  &lt;N&gt;                    --histsize=&lt;N&gt; (negative: <span class="built_in">readonly</span>)</span><br><span class="line">  -S  &lt;prompt&gt;               --substitute-prompt=&lt;prompt&gt;</span><br><span class="line">  -t  &lt;name&gt;                 --set-term-name=&lt;name&gt;</span><br><span class="line">  -w  &lt;N&gt;                    --wait-before-prompt=&lt;N&gt; (msec, &lt;<span class="number">0</span>  : patient mode)</span><br><span class="line">  -z  &lt;filter <span class="built_in">command</span>&gt;       --filter=&lt;filter <span class="built_in">command</span>&gt;</span><br><span class="line"></span><br><span class="line">bug reports, suggestions, updates:</span><br><span class="line">http://utopia.knoware.nl/~hlub/uck/rlwrap/</span><br><span class="line">[root@centos]~/rlwrap-<span class="number">0.37</span><span class="comment">#</span></span><br></pre></td></tr></table></figure></p>
<h2 id="使用">使用</h2><p>源码安装默认安装到这里<code>/usr/local/bin/rlwrap</code>，<br>部分系统或者用户下面此路径不包括在PATH变量，可以修改变量，我就直接用绝对路径引用了<br>下面是使用方法，以SQLPlus这个奇葩为例:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[oracle@centos ~]$ <span class="built_in">alias</span> sqlplus=<span class="string">'/usr/local/bin/rlwrap sqlplus'</span></span><br><span class="line">[oracle@centos ~]$ sqlplus /nolog</span><br><span class="line"></span><br><span class="line">SQL*Plus: Release <span class="number">11.2</span>.<span class="number">0.1</span>.<span class="number">0</span> Production on Wed Nov <span class="number">20</span> <span class="number">09</span>:<span class="number">52</span>:<span class="number">40</span> <span class="number">2013</span></span><br><span class="line"></span><br><span class="line">Copyright (c) <span class="number">1982</span>, <span class="number">2009</span>, Oracle.  All rights reserved.</span><br><span class="line"></span><br><span class="line">SQL&gt; conn / as sysdba</span><br><span class="line">Connected to an idle instance.</span><br><span class="line">SQL&gt; &lt;上下键/左右键/各种键开始readline之旅吧..&gt;</span><br></pre></td></tr></table></figure>
<p>如果没有意外的话就可以把别名绑定添加<code>.bashrc</code>里了<br>从此一劳永逸…</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>众所周知，Linux下面的SQLPlus不支持上下键历史记录，左右键移动光标，<br>作为一个命令行工具来说，Linux版竟然不如Windows版好用，真是悲哀 </p>
<h2 id="神器rlwrap出场。">神器<code>rlwrap</code>出场。</h2><p>这个工具其实是一个<code>readline</code>的包装库，可以使任意命令支持<code>readline</code>风格的输入，<br>上下键翻阅历史记录，左右键移动光标，<code>ctrl+a</code>移动行首，<code>ctrl+e</code>移动行尾等等，<br>如欲了解详细，请移步官网 <a href="">http://utopia.knoware.nl/~hlub/uck/rlwrap/#rlwrap</a></p>
<p>命令控对于<code>readline</code>是再熟悉不过了，吸引力当然也是不在话下</p>
<p>嫌下面啰嗦的直接看Gist:<a href="">https://gist.github.com/gyk001/7557096</a></p>]]>
    
    </summary>
    
      <category term="Linux" scheme="http://www.guoyukun.cn/tags/linux/"/>
    
      <category term="rlwrap" scheme="http://www.guoyukun.cn/tags/rlwrap/"/>
    
      <category term="sqlplus" scheme="http://www.guoyukun.cn/tags/sqlplus/"/>
    
      <category term="工具" scheme="http://www.guoyukun.cn/categories/tools/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[投机取巧获取VeryCD页面上所有的ED2K链接地址]]></title>
    <link href="http://www.guoyukun.cn/post/get-verycd-all-ed2k-links/"/>
    <id>http://www.guoyukun.cn/post/get-verycd-all-ed2k-links/</id>
    <published>2013-11-19T04:43:21.000Z</published>
    <updated>2013-11-19T04:43:21.000Z</updated>
    <content type="html"><![CDATA[<p>今天搜索资源找到VeryCD的一个页面，话说自从电驴改版以后一年多没有上过了，<br>复制选中的链接按钮不知道为神马不好用了，难道是我装了flash屏蔽插件引起的？<br>不管了，不用就不用，直接暴力解决。<br>发现verycd上有用jQuery，真是天助我也！<br>打开浏览器调试窗口，console选项卡，粘贴以下代码,回车,<br>弹出框上 <code>command+a</code> -&gt; <code>command+c</code>,<br>打开迅雷 <code>新建任务</code> -&gt; <code>command+v</code>,收工<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">urls = <span class="string">''</span>;</span><br><span class="line">$.each($(<span class="string">'a[href^=ed2k]'</span>),<span class="function"><span class="keyword">function</span><span class="params">(i,aa)</span></span>&#123;</span><br><span class="line">	urls = urls +$(aa).attr(<span class="string">'href'</span>)+<span class="string">'\n'</span>;</span><br><span class="line">&#125;);</span><br><span class="line">alert(urls);</span><br></pre></td></tr></table></figure></p>
<p><a href="https://gist.github.com/gyk001/7527953" target="_blank" rel="external">https://gist.github.com/gyk001/7527953</a></p>
<p>什么？<br>链接太多，弹出框太长看不到确定和取消按钮，不知道怎么关闭弹出框？</p>
<p>好吧，我实在不想告诉你我是这么干的：<br>鼠标点击那一坨链接，TAB键，空格</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>今天搜索资源找到VeryCD的一个页面，话说自从电驴改版以后一年多没有上过了，<br>复制选中的链接按钮不知道为神马不好用了，难道是我装了flash屏蔽插件引起的？<br>不管了，不用就不用，直接暴力解决。<br>发现verycd上有用jQuery，真是天助我也！<br>打]]>
    </summary>
    
      <category term="verycd" scheme="http://www.guoyukun.cn/tags/verycd/"/>
    
      <category term="生活" scheme="http://www.guoyukun.cn/categories/life/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[TextExpander偶尔失灵的解决办法]]></title>
    <link href="http://www.guoyukun.cn/post/textexpander-not-work/"/>
    <id>http://www.guoyukun.cn/post/textexpander-not-work/</id>
    <published>2013-11-18T12:44:14.000Z</published>
    <updated>2013-11-18T12:44:14.000Z</updated>
    <content type="html"><![CDATA[<p>TextExpander是一个效率神器，不过偶尔会使点小性子，玩失灵</p>
<p>刚开始还以为是升级到10.9有兼容性问题，<br>后来无意间看到<a href="http://lucifr.com/2013/01/16/use-textexpander-touch-to-boost-ios-input-speed/" target="_blank" rel="external">lucifr的文章</a><br>原来切换到英文然后再切回拼音就OK啦，解决方案好简单的说呢</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>TextExpander是一个效率神器，不过偶尔会使点小性子，玩失灵</p>
<p>刚开始还以为是升级到10.9有兼容性问题，<br>后来无意间看到<a href="http://lucifr.com/2013/01/16/use-textexpander-touch-to]]>
    </summary>
    
      <category term="Mac" scheme="http://www.guoyukun.cn/tags/mac/"/>
    
      <category term="textexpander" scheme="http://www.guoyukun.cn/tags/textexpander/"/>
    
      <category term="工具" scheme="http://www.guoyukun.cn/categories/tools/"/>
    
  </entry>
  
</feed>